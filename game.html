<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚²ãƒ¼ãƒ ç”»é¢</title>
    <style>body{text-align:center; padding:20px; font-family:sans-serif;}</style>
</head>
<body>
    <h1>ğŸ® ã‚²ãƒ¼ãƒ é–‹å§‹ï¼</h1>
    <h2 id="welcome-msg"></h2>
    <p>ã‚ãªãŸã®å½¹è·ã‚’ç¢ºèªã—ã¦ã„ã¾ã™...</p>
    <h1 id="my-role" style="font-size:3em; color:red;">???</h1>

    <script type="module">
        import { db, ref, get, ROOM_ID } from './config.js';

        // URLã‹ã‚‰è‡ªåˆ†ã®åå‰ã‚’å–ã‚Šå‡ºã™
        const params = new URLSearchParams(window.location.search);
        const myName = params.get('name');

        document.getElementById('welcome-msg').textContent = `${myName}ã•ã‚“ã€ã‚ˆã†ã“ã`;

        if(myName) {
            // Firebaseã‹ã‚‰è‡ªåˆ†ã®å½¹è·ã‚’è¦‹ã«è¡Œã
            get(ref(db, `rooms/${ROOM_ID}/players/${myName}/role`)).then((snap) => {
                const role = snap.val();
                document.getElementById('my-role').textContent = role;
            });
        }
    </script>
</body>
</html>
